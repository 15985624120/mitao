{"remainingRequest":"E:\\桌面\\nectarine\\nectarine_isweb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\桌面\\nectarine\\nectarine_isweb\\src\\components\\like.vue?vue&type=style&index=0&id=371df828&scoped=true&lang=css&","dependencies":[{"path":"E:\\桌面\\nectarine\\nectarine_isweb\\src\\components\\like.vue","mtime":1603206454426},{"path":"E:\\桌面\\nectarine\\nectarine_isweb\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\桌面\\nectarine\\nectarine_isweb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\桌面\\nectarine\\nectarine_isweb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\桌面\\nectarine\\nectarine_isweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\桌面\\nectarine\\nectarine_isweb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKDQpib2R5IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDEzNywgMTY0LCAwLjIpOw0KICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOw0KICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0Ow0KfQ0KDQoubGlrZXIgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQp9DQoNCi5idG4gew0KICB3aWR0aDogMjRweDsNCiAgZGlzcGxheTogZmxleDsNCiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogIGhlaWdodDogMjRweDsNCiAgYm9yZGVyLXJhZGl1czogNTAlOw0KICBib3JkZXI6IG5vbmU7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBsZWZ0OiA1MCU7DQogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC0xMCUpOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkY0RDgwOw0KICBjb2xvcjogI2ZmZjsNCiAgb3V0bGluZTogbm9uZTsNCiAgdHJhbnNpdGlvbjogMC4zcyBlYXNlOw0KICBib3gtc2hhZG93OiAwIDNweCAxMHB4ICNGOTJBODI7DQp9DQouYnRuIHN2ZyB7DQogIGZpbGw6ICNmZmY7DQp9DQouYnRuOmhvdmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI0Y5MkE4MjsNCn0NCmNhbnZhc3sNCiAgbWF4LXdpZHRoOiA1MDBweDsNCn0NCg=="},{"version":3,"sources":["like.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"like.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n       <div class=\"liker\">\r\n\t        <canvas class=\"hearts-canvas\"></canvas>\r\n\t        <button class=\"btn\">\r\n\t        \t<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n\t        \t\t<path d=\"M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z\"></path>\r\n\t        \t</svg>\r\n\t        </button>   \r\n        </div>\r\n    </div>\r\n</template>\r\n<style scoped>\r\nbody {\r\n  background-color: rgba(255, 137, 164, 0.2);\r\n  background-size: cover;\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n.liker {\r\n  position: absolute;\r\n}\r\n\r\n.btn {\r\n  width: 24px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 24px;\r\n  border-radius: 50%;\r\n  border: none;\r\n  position: absolute;\r\n  cursor: pointer;\r\n  left: 50%;\r\n  transform: translate(-50%, -10%);\r\n  background-color: #FF4D80;\r\n  color: #fff;\r\n  outline: none;\r\n  transition: 0.3s ease;\r\n  box-shadow: 0 3px 10px #F92A82;\r\n}\r\n.btn svg {\r\n  fill: #fff;\r\n}\r\n.btn:hover {\r\n  background-color: #F92A82;\r\n}\r\ncanvas{\r\n  max-width: 500px;\r\n}\r\n</style>\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            d:'M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z'\r\n        }\r\n    },\r\n    mounted(){\r\n        class HeartsFlow {\r\n    constructor(data) {\r\n    this.el = document.querySelector(data.canvasEl);\r\n    this.w = 200;\r\n    this.h = 400;\r\n    this.ctx = this.el.getContext('2d');\r\n    this.colors = [\r\n    '255, 137, 164', //'#FF89A4',\r\n    '239, 121, 138', //'#EF798A',\r\n    '255, 77, 128', //'#FF4D80',\r\n    '249, 42, 130' //'#F92A82'\r\n    ];\r\n    this.heartsAmount = data.amount;\r\n    this.heartsList = [];\r\n    this.isAnimate = false;\r\n    this.raf = null;\r\n    this.animate = this.animate.bind(this);\r\n    this.paintHeart = this.paintHeart.bind(this);\r\n    this.stopAnimation = this.stopAnimation.bind(this);\r\n    this.init();\r\n  }\r\n  getRandomColor() {\r\n    return this.colors[Math.floor(Math.random() * this.colors.length)];\r\n  }\r\n  getRandom(min, max) {\r\n    return Math.floor(Math.random() * (max - min) + min);\r\n  }\r\n  setHeartsList() {\r\n    let arr = [];\r\n    for (let i = 0; i < this.heartsAmount; i++) {\r\n      let currentSize = this.getRandom(10, 15);\r\n      let dt = {\r\n        x: this.w / 2,\r\n        y: this.h,\r\n        bx: this.w / 2,\r\n        by: this.h,\r\n        pos: this.h,\r\n        _osp: this.getRandom(200, 400) / 100,\r\n        osp: this.getRandom(11, 12) / 10,\r\n        vsp: this.getRandom(currentSize, currentSize + i * 2) / 1000,\r\n        size: currentSize,\r\n        color: this.getRandomColor(),\r\n        alfa: 1 };\r\n\r\n      arr.push(dt);\r\n    }\r\n    this.heartsList = [...this.heartsList, ...arr];\r\n  }\r\n  getCoordinates({ x, y, size, color, bx, by, _osp, osp, vsp, pos, alfa }) {\r\n    return {\r\n      xst: x,\r\n      yst: y + size / 2,\r\n      x0: x - size / 1.4,\r\n      y0: y + size / 4,\r\n      x1: x - size / 1.3,\r\n      y1: y - size / 1.3,\r\n      _x0: x + size / 1.4,\r\n      _y0: y + size / 4,\r\n      _x1: x + size / 1.3,\r\n      _y1: y - size / 1.3,\r\n      xfn: x,\r\n      yfn: y - size / 3,\r\n      bx: bx,\r\n      by: by,\r\n      _osp: _osp,\r\n      osp: osp,\r\n      vsp: vsp,\r\n      pos: pos,\r\n      alfa: alfa,\r\n      size: size,\r\n      color: color };\r\n\r\n  }\r\n  paintHeart({ xst, yst, x0, y0, _x0, _y0, x1, y1, _x1, _y1, xfn, yfn, color, alfa }) {\r\n    this.ctx.globalCompositeOperation = \"lighter\";\r\n    this.ctx.beginPath();\r\n    this.ctx.moveTo(xst, yst);\r\n    this.ctx.bezierCurveTo(x0, y0, x1, y1, xfn, yfn);\r\n    this.ctx.moveTo(xst, yst);\r\n    this.ctx.bezierCurveTo(_x0, _y0, _x1, _y1, xfn, yfn);\r\n    this.ctx.fillStyle = `rgba(${color}, ${alfa})`;\r\n    this.ctx.strokeStyle = `rgba(${color}, ${alfa})`;\r\n    this.ctx.fill();\r\n    this.ctx.stroke();\r\n    this.ctx.closePath();\r\n  }\r\n  mutateData() {\r\n    this.heartsList = this.heartsList.map(item => {\r\n      let pos = item.pos - 0.05;\r\n      let x = item.x + Math.sin(pos * item._osp) * ((pos - item.by) / item.osp);\r\n      let y = pos + (pos - item.by) / item.vsp * 1.6;\r\n      let alfa = this.normalize0between1(0, this.h, y).toFixed(1);\r\n      return {\r\n        ...item, x: x, y: y, pos: pos, alfa: alfa };\r\n\r\n    });\r\n    this.heartsList = this.heartsList.filter(item => item.y > 0);\r\n  }\r\n  normalize0between1(min, max, value) {\r\n    return (value - min) / (max - min);\r\n  }\r\n  setCanvas() {\r\n    this.el.width = this.w;\r\n    this.el.height = this.h;\r\n  }\r\n  startAnimation() {\r\n    if (!this.isAnimate) {\r\n      this.isAnimate = true;\r\n      console.log('start animation');\r\n      this.setHeartsList();\r\n      this.animate();\r\n    } else {\r\n      this.setHeartsList();\r\n    }\r\n  }\r\n  stopAnimation() {\r\n    this.isAnimate = false;\r\n    console.log('stop animation');\r\n    cancelAnimationFrame(this.raf);\r\n  }\r\n  animate() {\r\n\r\n    this.ctx.clearRect(0, 0, this.w, this.h);\r\n\r\n    if (this.isAnimate) {\r\n      for (let i = 0, len = this.heartsList.length; i < len; i++) {\r\n        let hrt = this.getCoordinates(this.heartsList[i]);\r\n        this.paintHeart(hrt);\r\n      }\r\n      this.mutateData();\r\n    }\r\n\r\n    this.raf = requestAnimationFrame(this.animate);\r\n\r\n    if (this.heartsList.length === 0 && this.isAnimate) {\r\n      this.stopAnimation();\r\n    }\r\n  }\r\n  init() {\r\n    this.setCanvas();\r\n    this.setHeartsList();\r\n    this.animate();\r\n  }}\r\n\r\n\r\nlet ht = new HeartsFlow({\r\n  canvasEl: '.hearts-canvas',\r\n  amount: 20 });\r\n\r\n\r\nlet btn = document.querySelector('.btn');\r\n\r\nbtn.addEventListener('click', function () {\r\n  ht.startAnimation();\r\n});\r\n    }\r\n}\r\n</script>"]}]}